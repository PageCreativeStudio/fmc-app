{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\44744\\\\netlify\\\\calendarproject\\\\src\\\\components\\\\info-card\\\\info-card.component.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Flex, Box } from \"reflexbox\";\nimport { Wrapper, Title, Text, SmallText, Image, TextBold, Circle, EventsWrapper, Events, Link } from \"./info-card.styles\";\nimport cal from '../../assets/images/calendar.png';\nimport formatDate from \"../../helpers/format-date\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst InfoCard = _ref => {\n  _s();\n\n  let {\n    width,\n    title,\n    textList,\n    phone1,\n    phone2,\n    email,\n    primary,\n    image,\n    events\n  } = _ref;\n  const [show, setShow] = useState(false);\n  const [filteredEvents, setFilteredEvents] = useState(null);\n  const [calendar, setCalendar] = useState(null);\n  useEffect(() => {\n    if (!events) return;\n    setFilteredEvents(events.sort((a, b) => {\n      return new Date(`${a.acf.date_from}:${a.acf.time}`) - new Date(`${b.acf.date_from}:${b.acf.time_end ? b.acf.time_end : '00:00'}`);\n    }).filter(event => {\n      var currentdate = new Date();\n      return currentdate.getTime() <= new Date(event.acf.date_from).getTime();\n    }));\n  }, [events]);\n  useEffect(() => {\n    if (!filteredEvents) return;\n    const calendarInstace = window.ics();\n    filteredEvents.forEach(event => {\n      calendarInstace.addEvent(event.acf.title, event.acf.description, \"\", `${event.acf.date_from} ${event.acf.time ? event.acf.time : '00:00'}`, `${event.acf.date_to ? event.acf.date_to : event.acf.date_from} ${event.acf.time_end ? event.acf.time_end : '00:00'}`);\n    });\n    setCalendar(calendarInstace);\n  }, [filteredEvents]);\n\n  const onDownloadClick = () => {\n    if (!calendar) return;\n    calendar.download(`${title} FMC Events`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    onClick: () => show && setShow(false),\n    marginRight: ['0', \"2rem\"],\n    marginBottom: \"2rem\",\n    flexDirection: \"column\",\n    primary: primary,\n    justifyContent: \"center\",\n    width: width,\n    children: [image && /*#__PURE__*/_jsxDEV(Image, {\n      alt: `Image for ${title}`,\n      src: image\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }, this), title && /*#__PURE__*/_jsxDEV(Title, {\n      primary: primary,\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 17\n    }, this), textList && /*#__PURE__*/_jsxDEV(Flex, {\n      marginBottom: \"1rem\",\n      flexWrap: \"wrap\",\n      children: textList.map((text, i) => /*#__PURE__*/_jsxDEV(SmallText, {\n        primary: primary,\n        dangerouslySetInnerHTML: {\n          __html: i !== textList.length - 1 ? `${text}&nbsp&nbsp•&nbsp&nbsp` : text\n        }\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 36\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      flexWrap: \"wrap\",\n      children: [phone1 && /*#__PURE__*/_jsxDEV(Text, {\n        primary: primary,\n        children: phone1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 20\n      }, this), phone1 && phone2 && /*#__PURE__*/_jsxDEV(Text, {\n        primary: primary,\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          margin: \"0 0.5rem\",\n          children: \"|\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 56\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 32\n      }, this), phone2 && /*#__PURE__*/_jsxDEV(Text, {\n        primary: primary,\n        children: phone2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 20\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), email && /*#__PURE__*/_jsxDEV(\"a\", {\n      href: `mailto:${email}`,\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        primary: primary,\n        children: email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 45\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }, this), filteredEvents && /*#__PURE__*/_jsxDEV(EventsWrapper, {\n      onClick: () => setShow(true),\n      marginTop: \"1rem\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        style: {\n          width: '2.5rem',\n          marginRight: '0.5rem'\n        },\n        alt: \"calendar\",\n        src: cal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextBold, {\n        primary: primary,\n        children: \"Upcoming Events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Events, {\n        show: show,\n        children: [filteredEvents.map(event => {\n          var _event$acf$category$;\n\n          return /*#__PURE__*/_jsxDEV(Flex, {\n            marginBottom: \"0.5rem\",\n            children: [/*#__PURE__*/_jsxDEV(Circle, {\n              color: (_event$acf$category$ = event.acf.category[0]) === null || _event$acf$category$ === void 0 ? void 0 : _event$acf$category$.acf.colour\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Flex, {\n              flexDirection: \"column\",\n              children: [/*#__PURE__*/_jsxDEV(SmallText, {\n                primary: primary,\n                children: `${formatDate(event.acf.date_from)} ${event.acf.time}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                primary: primary,\n                children: event.acf.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 15\n            }, this)]\n          }, event.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(Link, {\n          onClick: onDownloadClick,\n          primary: primary,\n          children: \"Download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 26\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n};\n\n_s(InfoCard, \"3BWHqFgdPmbu5TNw4oc/deKin58=\");\n\n_c = InfoCard;\nexport default InfoCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"InfoCard\");","map":{"version":3,"names":["React","useEffect","useState","Flex","Box","Wrapper","Title","Text","SmallText","Image","TextBold","Circle","EventsWrapper","Events","Link","cal","formatDate","InfoCard","width","title","textList","phone1","phone2","email","primary","image","events","show","setShow","filteredEvents","setFilteredEvents","calendar","setCalendar","sort","a","b","Date","acf","date_from","time","time_end","filter","event","currentdate","getTime","calendarInstace","window","ics","forEach","addEvent","description","date_to","onDownloadClick","download","map","text","i","__html","length","marginRight","category","colour","id"],"sources":["C:/Users/44744/netlify/calendarproject/src/components/info-card/info-card.component.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Flex, Box } from \"reflexbox\";\r\nimport { Wrapper, Title, Text, SmallText, Image, TextBold, Circle, EventsWrapper, Events, Link } from \"./info-card.styles\";\r\nimport cal from '../../assets/images/calendar.png'\r\nimport formatDate from \"../../helpers/format-date\";\r\n\r\nconst InfoCard = ({ width, title, textList, phone1, phone2, email, primary, image, events }) => {\r\n\r\n  const [show, setShow] = useState(false)\r\n  const [filteredEvents, setFilteredEvents] = useState(null)\r\n  const [calendar, setCalendar] = useState(null)\r\n\r\n  useEffect(() => {\r\n    if (!events) return\r\n    setFilteredEvents(events.sort((a, b) => {\r\n      return new Date(`${a.acf.date_from}:${a.acf.time}`) - new Date(`${b.acf.date_from}:${b.acf.time_end ? b.acf.time_end : '00:00'}`);\r\n    }).filter(event => {\r\n      var currentdate = new Date();\r\n      return currentdate.getTime() <= new Date(event.acf.date_from).getTime()\r\n    }))\r\n  }, [events])\r\n\r\n  useEffect(() => {\r\n    if (!filteredEvents) return\r\n    const calendarInstace = window.ics();\r\n    filteredEvents.forEach(event => {\r\n      calendarInstace.addEvent(event.acf.title, event.acf.description, \"\", `${event.acf.date_from} ${event.acf.time ? event.acf.time : '00:00'}`, `${event.acf.date_to ? event.acf.date_to : event.acf.date_from} ${event.acf.time_end ? event.acf.time_end : '00:00'}`);\r\n    });\r\n    setCalendar(calendarInstace)\r\n  }, [filteredEvents])\r\n\r\n  const onDownloadClick = () => {\r\n    if (!calendar) return\r\n    calendar.download(`${title} FMC Events`);\r\n  }\r\n\r\n  return (\r\n    <Wrapper onClick={() => show && setShow(false)} marginRight={['0', \"2rem\"]} marginBottom=\"2rem\" flexDirection=\"column\" primary={primary} justifyContent=\"center\" width={width}>\r\n      {image && <Image alt={`Image for ${title}`} src={image} />}\r\n      {title && <Title primary={primary}>{title}</Title>}\r\n      {textList && <Flex marginBottom=\"1rem\" flexWrap=\"wrap\">\r\n        {textList.map((text, i) => <SmallText primary={primary} key={i} dangerouslySetInnerHTML={{ __html: i !== textList.length - 1 ? `${text}&nbsp&nbsp•&nbsp&nbsp` : text }} />)}\r\n      </Flex>}\r\n      <Flex flexWrap=\"wrap\">\r\n        {phone1 && <Text primary={primary}>{phone1}</Text>}\r\n        {(phone1 && phone2) && <Text primary={primary}><Box margin=\"0 0.5rem\">|</Box></Text>}\r\n        {phone2 && <Text primary={primary}>{phone2}</Text>}\r\n      </Flex>\r\n      {email && <a href={`mailto:${email}`}><Text primary={primary}>{email}</Text></a>}\r\n      {filteredEvents && <EventsWrapper onClick={() => setShow(true)} marginTop=\"1rem\">\r\n        <img style={{ width: '2.5rem', marginRight: '0.5rem' }} alt=\"calendar\" src={cal} />\r\n        <TextBold primary={primary}>Upcoming Events</TextBold>\r\n        <Events show={show}>\r\n          {filteredEvents.map(event => (\r\n            <Flex marginBottom=\"0.5rem\" key={event.id}>\r\n              <Circle color={event.acf.category[0]?.acf.colour} />\r\n              <Flex flexDirection=\"column\">\r\n                <SmallText primary={primary}>\r\n                  {`${formatDate(event.acf.date_from)} ${event.acf.time}`}\r\n                </SmallText>\r\n                <Text primary={primary}>{event.acf.title}</Text>\r\n              </Flex>\r\n            </Flex>\r\n          ))}\r\n          <Link onClick={onDownloadClick} primary={primary}>\r\n            Download\r\n          </Link>\r\n        </Events>\r\n      </EventsWrapper>\r\n      }\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default InfoCard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}