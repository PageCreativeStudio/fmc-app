{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\44744\\\\netlify\\\\calendarproject\\\\src\\\\components\\\\accordian\\\\accordian.component.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { AccordianTitle, Panel } from './accordian.styles';\nimport { Box, Flex } from 'reflexbox';\nimport { withTheme } from '@emotion/react';\nimport cal from '../../assets/images/calendar.png';\nimport minus from '../../assets/svgs/minus';\nimport plus from '../../assets/svgs/plus';\nimport { InfoPopup } from '../info-popup';\nimport { Events, EventsWrapper, Link, SmallText, Text, TextBold, Circle } from '../info-card/info-card.styles';\nimport formatDate from '../../helpers/format-date';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Accordian = _ref => {\n  _s();\n\n  let {\n    theme,\n    title,\n    children,\n    width = \"100%\",\n    active = false,\n    infoBox,\n    events\n  } = _ref;\n  // setup active state to track if accordian is active so we can conditonally set css styles\n  const [isActive, setIsActive] = useState(active);\n  const [showCalendar, setShowCalendar] = useState(false); // Toggle active state when this function is run\n\n  const handleOnClick = () => {\n    setIsActive(!isActive);\n  };\n\n  const [filteredEvents, setFilteredEvents] = useState(null);\n  const [calendar, setCalendar] = useState(null);\n  useEffect(() => {\n    if (!events) return;\n    setFilteredEvents(events.sort((a, b) => {\n      return new Date(`${a.acf.date_from}:${a.acf.time}`) - new Date(`${b.acf.date_from}:${b.acf.time_end ? b.acf.time_end : '00:00'}`);\n    }).filter(event => {\n      var currentdate = new Date();\n      return currentdate.getTime() <= new Date(event.acf.date_from).getTime();\n    }));\n  }, [events]);\n  useEffect(() => {\n    if (!filteredEvents) return;\n    const calendarInstace = window.ics();\n    console.log(filteredEvents);\n    filteredEvents.forEach(event => {\n      calendarInstace.addEvent(event.acf.title, event.acf.description, \"\", `${event.acf.date_from} ${event.acf.time ? event.acf.time : '00:00'}`, `${event.acf.date_to ? event.acf.date_to : event.acf.date_from} ${event.acf.time_end ? event.acf.time_end : '00:00'}`);\n    });\n    setCalendar(calendarInstace);\n  }, [filteredEvents]);\n\n  const onDownloadClick = () => {\n    if (!calendar) return;\n    calendar.download(`${title} FMC Events`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    onClick: () => showCalendar && setShowCalendar(false),\n    marginBottom: theme.spacing[1],\n    width: width,\n    children: [title && /*#__PURE__*/_jsxDEV(AccordianTitle, {\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      onClick: handleOnClick,\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        children: [title, infoBox && /*#__PURE__*/_jsxDEV(Box, {\n          marginLeft: \"1rem\",\n          children: /*#__PURE__*/_jsxDEV(InfoPopup, {\n            width: \"37rem\",\n            children: infoBox\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), isActive ? minus : plus]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Panel, {\n      active: isActive,\n      children: [filteredEvents && /*#__PURE__*/_jsxDEV(EventsWrapper, {\n        onClick: () => setShowCalendar(true),\n        marginTop: \"1rem\",\n        marginBottom: \"3rem\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          style: {\n            width: '2.5rem',\n            marginRight: '0.5rem'\n          },\n          alt: \"calendar\",\n          src: cal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextBold, {\n          primary: false,\n          children: \"Upcoming Events\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Events, {\n          show: showCalendar,\n          children: [filteredEvents.map(event => {\n            var _event$acf$category$;\n\n            return /*#__PURE__*/_jsxDEV(Flex, {\n              marginBottom: \"0.5rem\",\n              children: [/*#__PURE__*/_jsxDEV(Circle, {\n                color: (_event$acf$category$ = event.acf.category[0]) === null || _event$acf$category$ === void 0 ? void 0 : _event$acf$category$.acf.colour\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Flex, {\n                flexDirection: \"column\",\n                children: [/*#__PURE__*/_jsxDEV(SmallText, {\n                  primary: false,\n                  children: `${formatDate(event.acf.date_from)} ${event.acf.time}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  primary: false,\n                  children: event.acf.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 17\n              }, this)]\n            }, event.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 15\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(Link, {\n            onClick: onDownloadClick,\n            primary: false,\n            children: \"Download\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 27\n      }, this), children && children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Accordian, \"RFzU5eFjI/6o5U2MB/fSCmJ/MeQ=\");\n\n_c = Accordian;\nexport default _c2 = withTheme(Accordian);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Accordian\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useEffect","useState","AccordianTitle","Panel","Box","Flex","withTheme","cal","minus","plus","InfoPopup","Events","EventsWrapper","Link","SmallText","Text","TextBold","Circle","formatDate","Accordian","theme","title","children","width","active","infoBox","events","isActive","setIsActive","showCalendar","setShowCalendar","handleOnClick","filteredEvents","setFilteredEvents","calendar","setCalendar","sort","a","b","Date","acf","date_from","time","time_end","filter","event","currentdate","getTime","calendarInstace","window","ics","console","log","forEach","addEvent","description","date_to","onDownloadClick","download","spacing","marginRight","map","category","colour","id"],"sources":["C:/Users/44744/netlify/calendarproject/src/components/accordian/accordian.component.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { AccordianTitle, Panel } from './accordian.styles';\r\nimport { Box, Flex } from 'reflexbox';\r\nimport { withTheme } from '@emotion/react'\r\nimport cal from '../../assets/images/calendar.png'\r\nimport minus from '../../assets/svgs/minus';\r\nimport plus from '../../assets/svgs/plus';\r\nimport { InfoPopup } from '../info-popup';\r\nimport { Events, EventsWrapper, Link, SmallText,Text, TextBold, Circle } from '../info-card/info-card.styles';\r\nimport formatDate from '../../helpers/format-date';\r\n\r\nconst Accordian = ({theme, title, children, width=\"100%\", active = false, infoBox, events}) => {\r\n\r\n  // setup active state to track if accordian is active so we can conditonally set css styles\r\n  const [isActive, setIsActive] = useState(active);\r\n  const [showCalendar, setShowCalendar] = useState(false);\r\n\r\n  // Toggle active state when this function is run\r\n  const handleOnClick = () => {\r\n    setIsActive(!isActive)\r\n  }\r\n\r\n  const [filteredEvents, setFilteredEvents] = useState(null)\r\n  const [calendar, setCalendar] = useState(null)\r\n\r\n  useEffect(() => {\r\n    if (!events) return\r\n    setFilteredEvents(events.sort((a, b) => {\r\n      return new Date(`${a.acf.date_from}:${a.acf.time}`) - new Date(`${b.acf.date_from}:${b.acf.time_end ? b.acf.time_end : '00:00'}`);\r\n    }).filter(event => {\r\n      var currentdate = new Date();\r\n      return currentdate.getTime() <= new Date(event.acf.date_from).getTime()\r\n    }))\r\n  }, [events])\r\n\r\n  useEffect(() => {\r\n    if(!filteredEvents) return\r\n    const calendarInstace = window.ics();\r\n    console.log(filteredEvents)\r\n    filteredEvents.forEach(event => {\r\n      calendarInstace.addEvent(event.acf.title, event.acf.description, \"\", `${event.acf.date_from} ${event.acf.time ? event.acf.time : '00:00'}`, `${event.acf.date_to ? event.acf.date_to : event.acf.date_from} ${event.acf.time_end ? event.acf.time_end : '00:00'}`);\r\n    });\r\n    setCalendar(calendarInstace)\r\n  }, [filteredEvents])\r\n  \r\n  const onDownloadClick = () => {\r\n    if (!calendar) return\r\n    calendar.download(`${title} FMC Events`);\r\n  }\r\n\r\n  return (\r\n    <Box onClick={() => showCalendar && setShowCalendar(false)} marginBottom={theme.spacing[1]} width={width}>\r\n      {title && <AccordianTitle alignItems=\"center\" justifyContent=\"space-between\" onClick={handleOnClick}>\r\n        <Flex alignItems=\"center\">\r\n          {title}\r\n          {infoBox &&<Box marginLeft=\"1rem\">\r\n            <InfoPopup width=\"37rem\">\r\n              {infoBox}\r\n            </InfoPopup>\r\n          </Box>}\r\n        </Flex>\r\n        {\r\n          isActive ? minus : plus\r\n        }\r\n      </AccordianTitle>}\r\n      <Panel active={isActive}>\r\n        {filteredEvents &&<EventsWrapper onClick={() => setShowCalendar(true)} marginTop=\"1rem\" marginBottom=\"3rem\">\r\n          <img style={{width:'2.5rem', marginRight: '0.5rem'}} alt=\"calendar\" src={cal} />\r\n          <TextBold primary={false}>Upcoming Events</TextBold>\r\n        <Events show={showCalendar}>\r\n          {filteredEvents.map(event => (\r\n              <Flex marginBottom=\"0.5rem\" key={event.id}>\r\n                <Circle color={event.acf.category[0]?.acf.colour} /> \r\n                <Flex flexDirection=\"column\">\r\n                  <SmallText primary={false}>\r\n                    {`${formatDate(event.acf.date_from )} ${event.acf.time}`}\r\n                  </SmallText>\r\n                  <Text primary={false}>{event.acf.title}</Text>\r\n                </Flex>\r\n              </Flex>\r\n            ))}\r\n            <Link onClick={onDownloadClick} primary={false}>\r\n              Download\r\n            </Link>\r\n          </Events>\r\n        </EventsWrapper>\r\n        }\r\n        {children && children}\r\n      </Panel>\r\n    </Box>\r\n  )\r\n}\r\nexport default withTheme(Accordian);"],"mappings":"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"},"metadata":{},"sourceType":"module"}